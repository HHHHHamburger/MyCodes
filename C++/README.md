## 简易计算器
1. 简易计算器要求  
(1) 要求用VC++ 6.0 软件来编写计算器程序。  
(2) 软件界面布局请参考Windows xp版本 自带计算器，界面可以不作美化处理。其中编辑、查看菜单要求做出“下拉菜单”的效果即可；点击帮助菜单时，要求可以弹出使用说明书。
2. 实现过程  
+ C++编程语言是很重要的一门技能，我从《C++ Primer》这本书开始学习C++语言，这本书对C++ 的基本知识讲解的非常之详细，知识量太多，其中一些基础的知识和C语言大同小异：   
   - 标准库string类、vector类、bitset类；   
   - C++的数组和指针、关系操作符、函数概念和操作；   
   - 几种容器的概念和算法的实现；
   - 类和类的对象的定义、声明和操作符；
   - 类的派生和继承     
+ 书本知识熟悉了之后，在熟悉的VC++6.0，按照书中的教程一步一步的去学习操作软件，软件的安装非常简单，一般在网上都可以免费下载到压缩包，里面有一个VC的自动安装程序，我们执行VC6目录下的setup.exe，在安装包的提示下进行，对初学者可采用“典型安装”方式。在安装好VC 6.0系统后，有时根据需要添加或删除某些部件，可插入CD盘重新执行setup.exe安装程序，安装程序会检测当前系统安装VC6的足件，用户单击“添加／删除”按钮后，在“安装维护”对话框中选定要添加的部件或撤消选定要删除的部件。与一般的应用软件一样，有以下两种启动方式：
   - 通过“开始”按钮，选择“程序”菜单，然后打开“Microsoft Visual studio 6.0中文版”子菜单中的“Microsoft Visual C++ 6.0 中文版”程序。
   - 用户也可以使用命令行启动VC。单击“开始”按钮后选择“运行”命令，在“运行”对话框中输入```c:\Program Files\Microsoft Visual Studio\VC98\VC6.exe```（按默认盘符和路径安装）即可。
	- 我自己电脑上装载的是VS2015版本，配备的更全面的MSDN。   
+ 首先是熟悉软件的使用，通过看书和教程学会了：
	- VC++6.0软件的开发环境；
	- MFC程序应用建立向导使用；
	- MFC程序框架；
	- MFC类层次结构；
	- MFC程序初始化过程；
	- MFC消息映射；
+ 接下来分析正式开始编写简易计算器，仿照windows自带的计算器，计算器需要能实现以下功能：
	- 数的加、减、乘、除等基本计算功能；
	- 科学计算函数，包括开方、倒数函数运算；
	- 具备历史计算的记忆功能；
	- 可以在输入错误时删除已输入的数值。
	- 可以清空编辑框中的已有数值。
因为大部分操作是利用按钮去实现的，所以对话框应用程序是最好的选择，利用向导产生对话框程序，添加上需要的按钮，通过类向导添加响应函数，然后在响应函数中编写相关算法来实现计算器功能，
+ 在学习过程中遇到的困难会很多，而在解决困难过程中学到的会越来越多：
	- 在算法实现过程中，退格键的实现    
由于是把数据存储在CString类型的变量中，而退格键就是去掉最后一个字符，不能直接转换成数字再去掉最后一位，因为要考虑前面还有操作符的情况，在网上查到一种实现方式是通过CString.Left()函数实现，直接返回最后一位之前所有的字符串就能实现。而利用CString.GetLength()函数取得字符串的长度减1就是需要传回来的长度，这样就实现了减去最后一位的字符串的效果。
	- 在《C++ Primer》上出现的CString类给出的操作函数只是一部分        
网上有很多关于CString的函数都没有，比如CString.GetAt()提取其中一位字符串，CString.GetLength()返回字符串的长度，这些很好用的书上都没有介绍，这里我遇到不明白的函数学会查询MSDN，还有网上一些相关的介绍来学习函数。
   - 添加一个菜单项   
	由于对话框没有菜单项，先需要添加一个菜单项资源，将菜单按照需要添加设定好，然后在对话框初始化函数中设定一个CMenu类型的参数menu，获取菜单资源，再加载菜单资源，代码如下：  
		```
		CMenu menu;
		menu.LoadMenu(IDR_MENU1);
		SetMenu(&menu);
		```
		还有一种简便方法，就是直接在对话框程序界面右键会出现一个可以选择菜单的选项框，这里直接添加简单又方便。   
	- 在最开始想怎么实现的时候，首先考虑的是小数点不好办，double转换成CString时，会显示小数点后面很多多余的零，想了几个方案：   
		- 中间计算变量、控件变量都是double的，结果出现计算时无法解决的问题，如果小数点后有10个零，后接着是一个1 这种情况很难去判断。
	 	- 控件变量是CString型，计算变量的时候也是CString型的，这种情况中间换算会出现之前小数点后有多余的零的错误。
		- 控件变量是double型，计算变量的时候也是CString型的，这种情况在转换的时候很是麻烦。    
 
		我用的最后一种控件变量是CString型，计算变量的时候也是double型的，而且解决了以上所有问题，还简单方便的实现了，没有复杂的算法。
	- 根据计算器上的每一种结果来还原计算器的功能，先从数字键开始，当有按下符号后，数字存到m_N2，没有就存到m_N1，m_N0存计算符号。
	- ```%```的算法，当只有一个数，也就是m_N0为空的时候，需要把编辑框中数的按照百分数的形式显示出来，当出现的是计算结果也是这种情况，当m_N0不为空的时候，显示的数是m_N1 * m_N2 * 0.01的结果放在m_N2上，然后继续按照基本的规则计算m_N1（第一个数） m_N0（计算符号） m_N2（第二个数），
	- 基本的开方、倒数只有在显示的数是一个可操作数是可以使用。判断出这种情况就可以了。
	- 正负号，判断显示的可操作数是正就在最前面添加“-”，当为负就把最前的字符去掉。
	- 小数点是最麻烦的，简单的办法就是增加一个参数，用来判断是否有小数点按下，当数字重新写入的时候，清零这个标志。已经写下就是-1，按下没有写下就是1，没有按下就是0，三种状态解决问题。
	- 判断状态一共四种，分别是如下四种，举例如下：
	 
		| 情况举例  | 编辑框显示 | m_N0(CStrin)|m_N1(double)|m_N2(double)|m_Result(CString)|
		|----------|----------|----------|----------|----------|----------|
		|  777 | 变  | 空 | 0  |  0 |  777 |
		|  77+ |  不变 |  +|  77 | 0  | 空  |
		|  77+77 | 变  | + |  77 |  0 |  77 |
		|  7+7= |  变 |  空|  14 |  7 | 空  |
		按照需求判断出合适的状态就能得到合适的结果。
	- M类型的，存储的时候，显示出“M”，并把结果存到m_M。
	重现的时候，把m_M再调出来显示。
	清除的时候，把m_M清空，把“M”清除。
	M+，把显示的数字与m_M相加，结果不显示。
	- CE和C，CE只清除显示的数，和m_Result的值，清除小数标志。
	C是全部清除掉。不清除“M”标志。

